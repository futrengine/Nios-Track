(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const f={"Economics (318)":[{id:"Ch-08",name:"Measures of Central Tendency",status:"pending"},{id:"Ch-09",name:"Measures of Dispersion",status:"pending"},{id:"Ch-10",name:"Correlation Analysis",status:"pending"},{id:"Ch-11",name:"Index Numbers",status:"pending"},{id:"Ch-12",name:"Intro to Study of Economics",status:"pending"},{id:"Ch-13",name:"Central Problems of Economy",status:"pending"},{id:"Ch-14",name:"Consumer Equilibrium",status:"pending"},{id:"Ch-15",name:"Demand",status:"pending"},{id:"Ch-16",name:"Price Elasticity of Demand",status:"pending"},{id:"Ch-17",name:"Production Function",status:"pending"},{id:"Ch-18",name:"Cost of Production",status:"pending"},{id:"Ch-19",name:"Supply",status:"pending"},{id:"Ch-20",name:"Price Elasticity of Supply",status:"pending"},{id:"Ch-21",name:"Forms of Market",status:"pending"},{id:"Ch-22",name:"Price Determination",status:"pending"},{id:"Ch-23",name:"Revenue & Profit Max",status:"pending"},{id:"Ch-24",name:"National Income Aggregates",status:"pending"},{id:"Ch-25",name:"Measurement of NI",status:"pending"},{id:"Ch-26",name:"Consumption, Saving, Investment",status:"pending"},{id:"Ch-27",name:"Theory of Income Determination",status:"pending"},{id:"Ch-28",name:"Money and Banking",status:"pending"},{id:"Ch-29",name:"Govt Budget",status:"pending"}],"Accountancy (320)":[{id:"Ch-14",name:"Depreciation",status:"pending"},{id:"Ch-15",name:"Provisions and Reserves",status:"pending"},{id:"Ch-16",name:"Financial Statements Intro",status:"pending"},{id:"Ch-17",name:"Financial Statements I",status:"pending"},{id:"Ch-18",name:"Financial Statements II",status:"pending"},{id:"Ch-19",name:"Not for Profit Org Intro",status:"pending"},{id:"Ch-20",name:"NPO Financial Statements",status:"pending"},{id:"Ch-21",name:"Accounts Incomplete Records",status:"pending"},{id:"Ch-22",name:"Partnership Intro",status:"pending"},{id:"Ch-23",name:"Admission of Partner",status:"pending"},{id:"Ch-24",name:"Retirement/Death of Partner",status:"pending"},{id:"Ch-25",name:"Dissolution of Firm",status:"pending"},{id:"Ch-26",name:"Company Intro",status:"pending"},{id:"Ch-27",name:"Issue of Shares",status:"pending"},{id:"Ch-28",name:"Forfeiture of Shares",status:"pending"},{id:"Ch-29",name:"Reissue of Forfeited Shares",status:"pending"},{id:"Ch-30",name:"Issue of Debentures",status:"pending"},{id:"Ch-31",name:"Fin. Statement Analysis Intro",status:"pending"},{id:"Ch-32",name:"Accounting Ratios I",status:"pending"},{id:"Ch-33",name:"Accounting Ratios II",status:"pending"},{id:"Ch-34",name:"Cash Flow Statement",status:"pending"}],"Business Studies (319)":[{id:"Ch-10",name:"Fundamentals of Management",status:"pending"},{id:"Ch-11",name:"Planning and Organising",status:"pending"},{id:"Ch-12",name:"Staffing",status:"pending"},{id:"Ch-13",name:"Directing",status:"pending"},{id:"Ch-14",name:"Coordination & Controlling",status:"pending"},{id:"Ch-15",name:"Financing of Business",status:"pending"},{id:"Ch-16",name:"Sources of Long Term Finance",status:"pending"},{id:"Ch-17",name:"Financial Management",status:"pending"},{id:"Ch-18",name:"Indian Financial Market",status:"pending"},{id:"Ch-19",name:"Intro to Marketing",status:"pending"},{id:"Ch-20",name:"Marketing Mix",status:"pending"},{id:"Ch-21",name:"Advertising & Salesmanship",status:"pending"},{id:"Ch-22",name:"Internal Trade",status:"pending"},{id:"Ch-23",name:"External Trade",status:"pending"},{id:"Ch-24",name:"Consumer Protection",status:"pending"}]},y="Nios-Alert",S="template_2d6pduo",E="2iAO2hcDv-c-ulN4W";(function(){emailjs.init(E)})();const D={apiKey:"AIzaSyAiZ8u-1lqP-ics1RNlFj1FGesecReanoE",authDomain:"nios-track.firebaseapp.com",projectId:"nios-track",storageBucket:"nios-track.firebasestorage.app",messagingSenderId:"883252312270",appId:"1:883252312270:web:e4c8d1cd79b144761d389f",measurementId:"G-PCWD79LW74"};firebase.apps.length||firebase.initializeApp(D);const b=firebase.firestore(),M=firebase.auth();let m=f,h=Date.now();const T=10800*1e3;let p=!1;const g=new Date;g.setDate(g.getDate()+90);document.addEventListener("DOMContentLoaded",()=>{document.getElementById("current-date").innerText=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),B(),v(),w()});async function v(){const n=document.getElementById("status-indicator");try{await M.signInAnonymously();const e=b.collection("students").doc("my_study_plan"),t=await e.get();t.exists?(m=t.data(),n.innerHTML='<i class="fa-solid fa-cloud"></i> Cloud Synced',n.style.color="var(--green)"):(await e.set(f),n.innerHTML='<i class="fa-solid fa-database"></i> DB Created')}catch(e){console.error("DB Error:",e),e.code==="auth/admin-restricted-operation"?n.innerHTML="âš  Enable Auth in Console":n.innerHTML='<i class="fa-solid fa-triangle-exclamation"></i> Offline Mode',n.style.color="var(--yellow)";const t=localStorage.getItem("niosStudyData");t&&(m=JSON.parse(t))}L()}function L(){const n=document.getElementById("app-container");n.innerHTML="";let e={total:0,pending:0,progress:0,done:0};for(const[t,a]of Object.entries(m)){let s=0;a.forEach(r=>{e.total++,r.status==="pending"&&e.pending++,r.status==="progress"&&e.progress++,r.status==="completed"&&(e.done++,s++)});const i=document.createElement("div");i.className="subject-section";const o=Math.round(s/a.length*100);i.innerHTML=`
            <div class="subject-header" onclick="toggleList('list-${t.split(" ")[0]}')">
                <div>
                    <h2 style="margin:0; font-size:1.1rem;">${t}</h2>
                    <span style="font-size:0.8rem; color:var(--text-muted)">${s} / ${a.length} Chapters Done</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" style="width: ${o}%"></div>
                </div>
            </div>
            <ul class="chapter-list active" id="list-${t.split(" ")[0]}">
                </ul>
        `;const C=i.querySelector("ul");a.forEach((r,I)=>{const d=document.createElement("li");d.className="chapter-item";let c="status-pending",l="Pending",u='<i class="fa-regular fa-circle"></i>';r.status==="progress"&&(c="status-progress",l="In Progress",u='<i class="fa-solid fa-spinner fa-spin"></i>'),r.status==="completed"&&(c="status-completed",l="Done",u='<i class="fa-solid fa-check-circle"></i>'),d.innerHTML=`
                <div style="display:flex; align-items:center;">
                    <span class="chapter-id">${r.id}</span>
                    <span class="chapter-name">${r.name}</span>
                </div>
                <button class="status-btn ${c}" onclick="toggleStatus('${t}', ${I})">
                    ${u} ${l}
                </button>
            `,C.appendChild(d)}),n.appendChild(i)}P(e)}function P(n){document.getElementById("count-pending").innerText=n.pending,document.getElementById("count-progress").innerText=n.progress,document.getElementById("count-done").innerText=n.done,document.getElementById("total-progress").innerText=Math.round(n.done/n.total*100)+"%"}function w(){["mousemove","keydown","click","scroll"].forEach(e=>{document.addEventListener(e,A)}),setInterval(()=>{Date.now()-h>T&&!p&&(F("Inactive Alert: You haven't studied in 3 hours!"),p=!0)},6e4);const n=localStorage.getItem("lastVisit");if(n){const e=new Date(n),t=(new Date-e)/(1e3*60*60);t>=3&&alert(`Welcome back! You were gone for ${Math.floor(t)} hours. Time to focus!`)}localStorage.setItem("lastVisit",new Date().toISOString())}function A(){h=Date.now(),p=!1}function F(n=null){const e=document.querySelector(".btn-email");e&&(e.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Sending...');const t=document.getElementById("count-done").innerText,a=document.getElementById("total-progress").innerText,i={to_name:"Student",message:n||`Current Status: ${t} Chapters Completed. Total Readiness: ${a}.`,date:new Date().toLocaleString()};emailjs.send(y,S,i).then(function(){e&&(e.innerHTML='<i class="fa-solid fa-check"></i> Sent!'),n||alert("Email Sent!"),setTimeout(()=>{e&&(e.innerHTML='<i class="fa-solid fa-envelope"></i> Email Report')},3e3)},function(o){e&&(e.innerHTML='<i class="fa-solid fa-xmark"></i> Failed'),console.error("Email Error:",o)})}function B(){const n=document.getElementById("countdown");setInterval(()=>{const e=new Date().getTime(),t=g-e,a=Math.floor(t/(1e3*60*60*24)),s=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(t%(1e3*60*60)/(1e3*60)),o=Math.floor(t%(1e3*60)/1e3);n.innerHTML=`${a}:${s}:${i}:${o}`},1e3)}
